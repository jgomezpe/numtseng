<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Numtseng: School of Professor Jonatan Gomez.</title>
	<script type='text/javascript' src='https://jgomezpe.github.io/konekti/src/konekti.js'></script> 
</head>

<body>

	<script>
		let I18N_URL = "https://jgomezpe.github.io/numtseng/i18n/" // Internationalization resources are stored in github
		let SERVER_URL = "https://jgomezpe.github.io/numtseng/" // Change this to your server name
		let KONEKTI_URL = "https://jgomezpe.github.io/konekti/" // Change this to your server name

		Konekti.uses('toc','sidebar','youtube','header','dropdown', 'navbar')

		class KMain extends MainClient{
			constructor(lang){ 
				super()
				this.page = 'home'
				this.lang = lang
			}

			select(page){
				if(page=='konekti')
					window.open(KONEKTI_URL+"index.html?page=home&lang="+this.lang, '_self')
				else if(page != 'home')	
                    window.open(SERVER_URL+page+"/index.html?page=home&lang="+this.lang, '_self')				
			}

			language(lang){
				if( lang != this.lang ) window.open(SERVER_URL+"index.html?page=home&lang="+lang,"_self")
			}
		}

		function KonektiMain(){
			var lang = Konekti.dom.getUserLanguage()

			var callback = function(json){ 
				if(json===undefined || json===null){
					lang = 'en'
					Konekti.resource.JSON(I18N_URL+lang+'.json', callback)
				}else{
					var client = new KMain(lang)
					document.title = json.Title
					var toc = {'plugin':'toc', 'setup':['tocNumtseng', {}, {'client':'client', 'method':'select'}, json.toc]}
					var header = {'plugin':'header', 'setup':['title','', json.Title, 3, {'class':'w3-center'}]}
					var dd = {'plugin':'toc', 'setup': ['sel_lang', {}, {"client":'client', "method":"language"},
						 ["English", "Espa√±ol"]]}	
					var langBtn={'plugin':'dropdown', 'setup':["dd3", "fa-language", "", dd, {'title':json.language}]}	

					var navbar = {'plugin':'navbar', 'setup':['navbar', [langBtn, header], '', {'class':'w3-black '}]}

					var youtube = {'plugin':'youtube', 'setup':['youtube', '100%', 'rest', json.video]}
					var main = {'plugin':'container', 'setup':['container', 'main-content', [navbar,youtube],'100%','100%']}

					Konekti.sidebar('body', 'root', '100%', '100%', toc, main)
					Konekti.resize()
				}
			}

			Konekti.resource.JSON(I18N_URL+lang+'.json', callback)
		}	
	</script>
</body>
</html>
